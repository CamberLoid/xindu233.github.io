---
layout: post
title:  "Unity-Unity2d入门"
date:   2018-04-18
excerpt: "记述了使用u2d最基础的一些知识"
tag:
- blog
- unity
comments: true
---

>这是作者在学习unity时的一些经验，适合刚接触unity的新手。该系列部分文章会涉及C#语言，并不会对其中某些语句和逻辑给出十分详细的讲解。
>本文适用于Unity2017以后版本，但如果你的Unity版本过新或过旧（比如你看到这篇文章的时候已经是2028年了），本文章的内容可能会与实际有所出入。

### 打开你的2d模式

阅读这篇文章的前提是你已经起码对Unity的页面组成和**场景**(Scene)的编辑有了一个大致的了解.

你也许已经惊喜（并不）的发现，你的Unity打开之后默认是3d的视图。点击Scene窗口上方的"2D"按钮，即可切换到2d模式。Unity引擎的2d，实际上是伪2d。它的2d只是在合适的位置放上了一只**平面摄像机**，摄像机视角的方向平行于z轴。此时，Y轴决定了GameObject上下的位置，X轴决定了GameObject左右的位置。你可能已经发现，你完全可以在没有2d模式的情况下，用3d视图制作一个2d或2.5d的游戏。但2d模式可以让你更方便的制作出你的游戏。

### 使用你的精灵

2d游戏中的所有图像都被称作精灵(Sprite)。Unity很贴心的提供了一整套的精灵**组件**(Component)。在Unity中你能方便的创建一个精灵，精灵图像的相应组件为**Sprite Renderer**。精灵有着专门的编辑器**Sprite Editor**。这并不是说你不能在2d模式下加入一个3d的立方体(Cube)或是其他的什么东西，而是使用精灵会让你的2d之旅变得更加方便。

首先，你需要导入你的Sprite。把图片拖入下方的Project中，并在右侧Inspector视图中把图片的Texture Type调整为Sprite(2D and UI)。之后在上方GameObject中的2D Object中创建一个GameObject。GameObject被创建之后自带有Sprite Renderer组件，你可以在右侧Inspector视图中把你的图片拖入到Sprite Renderer的Sprite属性中，这可以改变你的Sprite的贴图。
>关于更多Sprite Renderer属性，请参考https://docs.unity3d.com/Manual/class-SpriteRenderer.html。

### 平面摄像机(Orthographic)和正交摄像机(Perspective)

简而言之，正交摄像机遵循近大远小的原则，它向前发出锥形的视线，正如现实中的摄像机一样。而平面摄像机会获得视野前方所有物体的正投影，也就是说平面摄像机并不遵循近大远小原则。因此一般来说我们用平面摄像机制作2d游戏。它们可以在摄像机的Camera组件中的Projection属性中切换。

### 2d组件(Component)

为了方便开发，Unity依然很贴心的提供了一整套美妙的2d物理**组件**(Component)。你可以在组件列表中的Physics 2D中找到它们。它们和Physics组件大同小异，如果有基础的话，你可以很方便的使用它们。这些组件会在未来的博文中进行更详细的介绍。

### 开始编写你的C#脚本

Unity同时支持JavaScript与C#脚本。在这里只介绍C#的使用。C#是一门**面向对象编程**(OOP)的语言。实际上，如果不基本掌握面向对象编程的基本思想，并对C#有一定的了解，你几乎不可能为你的游戏写出复杂的功能（比如在场景中按一定逻辑自动生成怪物）。但好消息是，你或许不需要用到比较麻烦深奥的内容（比如令人望而生厌的数据结构和算法），也不用在乎你的代码运行时间的长短。你只需要把你的代码按逻辑写出来就可以实现你的功能，而不用考虑太多。（当然啦，如果你想进一步研究unity，用它实现一些更加高级的功能，比如优化你的3d游戏等就另说了）同时Unity官方也给出了十分详尽的文档。在Unity的C#编程中,一般只需要在.cs文件最上方引入UnityEngine等命名空间。之后的文章会简单介绍一些简单的脚本，即使你并没有能够完全看懂上面的内容，你也同样可以写出能控制你游戏的脚本。

>Unity官方文档(2018.1版本) https://docs.unity3d.com/2018.1/Documentation/ScriptReference/

### 二维向量Vector2、二维射线Ray2D等

Vector2、Vector2Int、Ray2D等是是C#脚本中用于2d开发的**结构体**(struct)。而Rigidbody2d等是C#脚本中用于2d开发的**类**(class)。它们的名字最后一般都有2或2D的标示，以和3d的结构体和类区分。尽可能在2d游戏制作中使用2d的结构体而不是3d的结构体，比如如果使用Vector3而不是Vector2，会对物体间距离的计算上造成一些意想不到的麻烦。更加麻烦的是，一些**方法**(Method)只接收Vector2（而另一部分只接收Vector3）作为参数。虽然Vector2和Vector3自带互相转换的运算，但这样依然会加大你的工作量。之后的文章会详细介绍它们之中的一部分。

### 如果你遇到了预期之外的结果

我们都知道，在~~绝大多数~~小部分时候就算对着教程做，你依然会遇到一些预期之外的结果。但幸好Xindu233作为惨遭车祸现场的行家里手，愿意为你提供一些必要的建议：

* 弄清楚是哪儿错了

首先你要搞清楚你错在了哪儿。如果没有错误提示，那么你的操作中极有可能没有让程序不能运行的错误。分析这种现象出现的原因，并仔细检查你的脚本或数值设定或选项有没有问题。

* 仔细看错误提示

实际上Unity中大部分错误提示都是可以被人类读懂且能够理解的。通过看错误提示你可以意识到哪里出了错误并解决掉它（虽然理解它确实不太容易）。如果你的脚本出现了语法错误而且你并看不懂，请百度解决你的C#语法问题或对比网上的代码（一般都没有）。

* 对比你之前的正确内容

把你现在的内容和之前正确的内容（如果有的话）进行对比，回想你刚刚改变了哪儿的内容，并针对你改变的内容进行修改。

* 逐句分析你的代码

一定要完全明白你的代码究竟哪儿执行了，哪儿没有执行。如果你还没弄明白自己的逻辑（我经常遇到这种事），那么就需要先完全搞明白它。

* 质疑你的教程

如果你是看着教程写的，那么你可以在重复以上建议两遍以上之后质疑你的教程。因为版本更新的原因，很可能教程上的东西根本不适用；或者写教程人的也比较菜（比如我），而且很不负责任，没有跑一遍就写了上去。但是一定要最后最后再怀疑教程，除非它有明显的错误。

* 让你的游戏致敬育碧

放弃修改你的bug，并认为你的游戏这样只是为了致敬。

### 如果你不会写

建议参考[Unity官方文档](https://docs.unity3d.com/Manual/index.html)。官方文档十分详细而且正确，是你能在网上找到的最准确内容（虽然它是英文）。
